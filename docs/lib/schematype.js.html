<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width" charset="utf-8"><title>neoprene</title><!-- Foundation CSS--><link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/css/foundation.min.css"><!-- Prism CSS--><style type="text/css">/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', monospace;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0,0%,100%,.5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}


.token.regex,
.token.important {
	color: #e90;
}

.token.important {
	font-weight: bold;
}

.token.entity {
	cursor: help;
}
</style><!-- Custom Styles--><style type="text/css">h1.page-title small {
  font-weight: 400;
}
/*.section-container, .section-container .section .title
  border-color #e6e6e6*/
#nav .section.active {
  padding-top: 0 !important;
}
#nav .section.active .title {
  background: #ddd;
}
#nav .section .title {
  background-color: #eee;
}
#nav .section .title a {
  font-weight: 700;
  padding: 0.6em;
}
#nav .section .title a small {
  font-size: 0.8em;
  line-height: 1em;
  display: block;
  color: #888;
  margin: 2px 0 -2px;
}
#nav .section .title:hover {
  background: #ddd;
}
code {
  background: transparent;
  line-height: 1.3em;
}
.comment {
  position: relative;
  padding-bottom: 1.5em;
  margin-bottom: 2em;
  border-bottom: 1px solid #ddd;
}
.comment ol,
.comment ul {
  margin-left: 2.25em;
}
.comment ol.no-bullet,
.comment ul.no-bullet {
  margin-left: 0;
}
.comment header {
  margin-bottom: 1.5em;
}
.comment header h1 {
  font-size: 2rem;
  margin-bottom: 0.2em;
}
.comment .section-container,
.comment .section-container > .section > .content {
  border: none;
}
.comment .section-container > .section > .title {
  padding: auto;
  background: none !important;
  border: none !important;
}
.comment .section-container > .section > .title a {
  border-radius: 4px;
  font-weight: 700;
  padding: 1px 10px 1px 0;
  margin-right: 5px;
  color: #ccc;
}
.comment .section-container > .section:hover .title a {
  color: #999;
}
.comment .section-container > .section.active .title a {
  color: #2ba6cb;
}
.comment .section-container > .section > .content {
  padding: 0.9em 0 0;
}
.comment div.description h2 {
  font-size: 1.2em;
}
.comment .tags span {
  margin-right: 4px;
}
.comment .tags .name,
.comment .tags .type {
  font-weight: 700;
}
.comment .tags .types {
  color: #666;
}
.comment .tags .description {
  margin-left: 15px;
}
.ctx-type {
  margin-right: 6px;
  font-size: 0.7em;
}
</style><script srr="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/vendor/custom.modernizr.js"></script></head><body><div class="row"><div class="small-12 columns"><h1 class="page-title">neoprene<small> lib/schematype.js</small></h1></div></div><div class="row"><div id="nav" class="large-3 columns"><div data-section="accordian" data-options="" class="section-container accordian"><div class="section"><p data-section-title class="title"><a href="../../docs/lib/graphObject.js.html"><small>lib/</small>graphObject.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/lib/graphObject.js.html#set">set</a></li><li><a href="../../docs/lib/graphObject.js.html#get">get</a></li><li><a href="../../docs/lib/graphObject.js.html#markModified">markModified</a></li><li><a href="../../docs/lib/graphObject.js.html#modifiedPaths">modifiedPaths</a></li><li><a href="../../docs/lib/graphObject.js.html#isModified">isModified</a></li><li><a href="../../docs/lib/graphObject.js.html#isDirectModified">isDirectModified</a></li><li><a href="../../docs/lib/graphObject.js.html#isInit">isInit</a></li><li><a href="../../docs/lib/graphObject.js.html#isSelected">isSelected</a></li><li><a href="../../docs/lib/graphObject.js.html#validate">validate</a></li><li><a href="../../docs/lib/graphObject.js.html#invalidate">invalidate</a></li><li><a href="../../docs/lib/graphObject.js.html#validateUniqueIndexes">validateUniqueIndexes</a></li><li><a href="../../docs/lib/graphObject.js.html#toObject">toObject</a></li><li><a href="../../docs/lib/graphObject.js.html#toJSON">toJSON</a></li><li><a href="../../docs/lib/graphObject.js.html#inspect">inspect</a></li><li><a href="../../docs/lib/graphObject.js.html#toString">toString</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../docs/lib/index.js.html"><small>lib/</small>index.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/lib/index.js.html#Neoprene">Neoprene</a></li><li><a href="../../docs/lib/index.js.html#connect">connect</a></li><li><a href="../../docs/lib/index.js.html#model">model</a></li><li><a href="../../docs/lib/index.js.html#version">version</a></li><li><a href="../../docs/lib/index.js.html#Schema">Schema</a></li><li><a href="../../docs/lib/index.js.html#loadModel">loadModel</a></li><li><a href="../../docs/lib/index.js.html#query">query</a></li><li><a href="../../docs/lib/index.js.html#findRelationshipById">findRelationshipById</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../docs/lib/model.js.html"><small>lib/</small>model.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/lib/model.js.html#Model">Model</a></li><li><a href="../../docs/lib/model.js.html#ensureIndexes">ensureIndexes</a></li><li><a href="../../docs/lib/model.js.html#createRelationshipTo">createRelationshipTo</a></li><li><a href="../../docs/lib/model.js.html#createRelationshipFrom">createRelationshipFrom</a></li><li><a href="../../docs/lib/model.js.html#getAllRelationships">getAllRelationships</a></li><li><a href="../../docs/lib/model.js.html#getOutgoingRelationships">getOutgoingRelationships</a></li><li><a href="../../docs/lib/model.js.html#getIncomingRelationships">getIncomingRelationships</a></li><li><a href="../../docs/lib/model.js.html#getAdjacentNodes">getAdjacentNodes</a></li><li><a href="../../docs/lib/model.js.html#traverse">traverse</a></li><li><a href="../../docs/lib/model.js.html#find">find</a></li><li><a href="../../docs/lib/model.js.html#findOne">findOne</a></li><li><a href="../../docs/lib/model.js.html#findById">findById</a></li><li><a href="../../docs/lib/model.js.html#findOneAndUpdate">findOneAndUpdate</a></li><li><a href="../../docs/lib/model.js.html#findOneAndRemove">findOneAndRemove</a></li><li><a href="../../docs/lib/model.js.html#findByIdAndUpdate">findByIdAndUpdate</a></li><li><a href="../../docs/lib/model.js.html#findByIdAndRemove">findByIdAndRemove</a></li><li><a href="../../docs/lib/model.js.html#getIndexedNode">getIndexedNode</a></li><li><a href="../../docs/lib/model.js.html#query">query</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../docs/lib/path.js.html"><small>lib/</small>path.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/lib/path.js.html#Path">Path</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../docs/lib/schema.js.html"><small>lib/</small>schema.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/lib/schema.js.html#Schema">Schema</a></li><li><a href="../../docs/lib/schema.js.html#add">add</a></li><li><a href="../../docs/lib/schema.js.html#reserved">reserved</a></li><li><a href="../../docs/lib/schema.js.html#path">path</a></li><li><a href="../../docs/lib/schema.js.html#eachPath">eachPath</a></li><li><a href="../../docs/lib/schema.js.html#requiredPaths">requiredPaths</a></li><li><a href="../../docs/lib/schema.js.html#pathType">pathType</a></li><li><a href="../../docs/lib/schema.js.html#pre">pre</a></li><li><a href="../../docs/lib/schema.js.html#post">post</a></li><li><a href="../../docs/lib/schema.js.html#plugin">plugin</a></li><li><a href="../../docs/lib/schema.js.html#method">method</a></li><li><a href="../../docs/lib/schema.js.html#static">static</a></li><li><a href="../../docs/lib/schema.js.html#index">index</a></li><li><a href="../../docs/lib/schema.js.html#set">set</a></li><li><a href="../../docs/lib/schema.js.html#indexes">indexes</a></li><li><a href="../../docs/lib/schema.js.html#virtual">virtual</a></li><li><a href="../../docs/lib/schema.js.html#virtualpath">virtualpath</a></li><li><a href="../../docs/lib/schema.js.html#Types">Types</a></li></ul></div></div><div class="section active"><p data-section-title class="title"><a href="../../docs/lib/schematype.js.html"><small>lib/</small>schematype.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/lib/schematype.js.html#SchemaType">SchemaType</a></li><li><a href="../../docs/lib/schematype.js.html#default">default</a></li><li><a href="../../docs/lib/schematype.js.html#index">index</a></li><li><a href="../../docs/lib/schematype.js.html#unique">unique</a></li><li><a href="../../docs/lib/schematype.js.html#set">set</a></li><li><a href="../../docs/lib/schematype.js.html#get">get</a></li><li><a href="../../docs/lib/schematype.js.html#validate">validate</a></li><li><a href="../../docs/lib/schematype.js.html#required">required</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../docs/lib/statemachine.js.html"><small>lib/</small>statemachine.js</a></p><div data-section-content class="content"><ul class="side-nav"></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../docs/lib/types/array.js.html"><small>lib/types/</small>array.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/lib/types/array.js.html#NeopreneArray">NeopreneArray</a></li><li><a href="../../docs/lib/types/array.js.html#_cast">_cast</a></li><li><a href="../../docs/lib/types/array.js.html#_markModified">_markModified</a></li><li><a href="../../docs/lib/types/array.js.html#_registerAtomic">_registerAtomic</a></li><li><a href="../../docs/lib/types/array.js.html#hasAtomics">hasAtomics</a></li><li><a href="../../docs/lib/types/array.js.html#push">push</a></li><li><a href="../../docs/lib/types/array.js.html#nonAtomicPush">nonAtomicPush</a></li><li><a href="../../docs/lib/types/array.js.html#pop">pop</a></li><li><a href="../../docs/lib/types/array.js.html#shift">shift</a></li><li><a href="../../docs/lib/types/array.js.html#remove">remove</a></li><li><a href="../../docs/lib/types/array.js.html#pull">pull</a></li><li><a href="../../docs/lib/types/array.js.html#splice">splice</a></li><li><a href="../../docs/lib/types/array.js.html#unshift">unshift</a></li><li><a href="../../docs/lib/types/array.js.html#sort">sort</a></li><li><a href="../../docs/lib/types/array.js.html#addToSet">addToSet</a></li><li><a href="../../docs/lib/types/array.js.html#toObject">toObject</a></li><li><a href="../../docs/lib/types/array.js.html#inspect">inspect</a></li><li><a href="../../docs/lib/types/array.js.html#indexOf">indexOf</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../docs/lib/utils.js.html"><small>lib/</small>utils.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/lib/utils.js.html#args">args</a></li><li><a href="../../docs/lib/utils.js.html#clone">clone</a></li><li><a href="../../docs/lib/utils.js.html#isNeopreneObject">isNeopreneObject</a></li><li><a href="../../docs/lib/utils.js.html#deepEqual">deepEqual</a></li><li><a href="../../docs/lib/utils.js.html#options">options</a></li><li><a href="../../docs/lib/utils.js.html#tick">tick</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../docs/lib/virtualtype.js.html"><small>lib/</small>virtualtype.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/lib/virtualtype.js.html#VirtualType">VirtualType</a></li><li><a href="../../docs/lib/virtualtype.js.html#get">get</a></li><li><a href="../../docs/lib/virtualtype.js.html#set">set</a></li><li><a href="../../docs/lib/virtualtype.js.html#applyGetters">applyGetters</a></li><li><a href="../../docs/lib/virtualtype.js.html#applySetters">applySetters</a></li></ul></div></div></div></div><div class="small-12 large-9 columns"><article class="comment"><header><h1 id="SchemaType">SchemaType</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>SchemaType()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{String}</span><span class="name">path</span><span class="description"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">[options]</span><span class="description"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{String}</span><span class="name">[instance]</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>SchemaType constructor</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">function SchemaType (path, options, instance) {
  this.path = path;
  this.instance = instance;
  this.validators = [];
  this.setters = [];
  this.getters = [];
  this.options = options;
  this._index = null;
  this.selected;

  for (var i in options) if (this[i] &amp;&amp; 'function' == typeof this[i]) {
    // { unique: true, index: true }
    if ('index' == i &amp;&amp; this._index) continue;

    var opts = Array.isArray(options[i])
      ? options[i]
      : [options[i]];

    this[i].apply(this, opts);
  }
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="default">default</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>SchemaType.prototype.default()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Function,any}</span><span class="name">val</span><span class="description">the default value</span></li><li class="tag"><span class="type">@return: </span><span class="types">{defaultValue}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Sets a default value for this SchemaType.</p>

<h4>Example:</h4>

<pre><code>var schema = new Schema({ n: { type: Number, default: 10 })
var M = neoprene.model('node', M', schema)
var m = new M;
console.log(m.n) // 10
</code></pre>

<p>Defaults can be either <code>functions</code> which return the value to use as the default or the literal value itself. Either way, the value will be cast based on its schema type before being set during document creation.</p>

<h4>Example:</h4>

<pre><code>// values are cast:
var schema = new Schema({ aNumber: Number, default: "4.815162342" })
var M = neoprene.model('node', M', schema)
var m = new M;
console.log(m.aNumber) // 4.815162342

// default unique objects for Mixed types:
var schema = new Schema({ mixed: Schema.Types.Mixed });
schema.path('mixed').default(function () {
  return {};
});

// if we don't use a function to return object literals for Mixed defaults,
// each document will receive a reference to the same object literal creating
// a "shared" object instance:
var schema = new Schema({ mixed: Schema.Types.Mixed });
schema.path('mixed').default({});
var M = neoprene.model('node', M', schema);
var m1 = new M;
m1.mixed.added = 1;
console.log(m1.mixed); // { added: 1 }
var m2 = new M;
console.log(m2.mixed); // { added: 1 }
</code></pre></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">SchemaType.prototype.default = function (val) {
  if (1 === arguments.length) {
    this.defaultValue = typeof val === 'function'
      ? val
      : this.cast(val);
    return this;
  } else if (arguments.length &gt; 1) {
    this.defaultValue = utils.args(arguments);
  }
  return this.defaultValue;
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="index">index</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>SchemaType.prototype.index()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object,Boolean}</span><span class="name">options</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{SchemaType}</span><span class="description">this</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Declares the index options for this schematype.</p>

<h4>Example:</h4>

<pre><code>var s = new Schema({ name: { type: String, index: true })
var s = new Schema({ name: { type: String, index: { unique: true}})
Schema.path('my.path').index(true);
Schema.path('my.path').index({ unique: true });
</code></pre></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">SchemaType.prototype.index = function (options) {
  this._index = options;
  return this;
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="unique">unique</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>SchemaType.prototype.unique()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Boolean}</span><span class="name">bool</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{SchemaType}</span><span class="description">this</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Declares an unique index.</p>

<h4>Examples:</h4>

<pre><code>var s = new Schema({ name: { type: String, unique: true })
Schema.path('name').index({ unique: true });
</code></pre></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">SchemaType.prototype.unique = function (bool) {
  if (!this._index || 'Object' !== this._index.constructor.name) {
    this._index = {};
  }

  this._index.unique = bool;
  return this;
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="set">set</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>SchemaType.prototype.set()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">fn</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{SchemaType}</span><span class="description">this</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Adds a setter to this schematype.</p>

<h4>Example:</h4>

<pre><code>function capitalize (val) {
  if ('string' != typeof val) val = '';
  return val.charAt(0).toUpperCase() + val.substring(1);
}

var s = new Schema({ name: { type: String, set: capitalize })
// or
Schema.path('name').set(capitalize);
</code></pre></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">SchemaType.prototype.set = function (fn) {
  if ('function' != typeof fn)
    throw new Error('A setter must be a function.');
  this.setters.push(fn);
  return this;
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="get">get</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>SchemaType.prototype.get()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">fn</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{SchemaType}</span><span class="description">this</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Adds a getter to this schematype.</p>

<h4>Example:</h4>

<pre><code>function dob (val) {
  if (!val) return val;
  return (val.getMonth() + 1) + "/" + val.getDate() + "/" + val.getFullYear();
}

var s = new Schema({ born: { type: Date, get: dob })
// or
Schema.path('name').get(dob);
</code></pre></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">SchemaType.prototype.get = function (fn) {
  if ('function' != typeof fn)
    throw new Error('A getter must be a function.');
  this.getters.push(fn);
  return this;
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="validate">validate</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>SchemaType.prototype.validate()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{RegExp,Function,Object}</span><span class="name">obj</span><span class="description">validator</span></li><li class="tag"><span class="type">@param: </span><span class="types">{String}</span><span class="name">[error]</span><span class="description">optional error message</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Adds validator(s) for this document path.</p>

<p>Validators must return <code>Boolean</code>. Returning false is interpreted as validation failure.</p>

<h4>Examples:</h4>

<pre><code>function validator () { ... }

var single = [validator, 'failed']
new Schema({ name: { type: String, validate: single }});

var many = [
    { validator: validator, msg: 'uh oh' }
  , { validator: fn, msg: 'failed' }
]
new Schema({ name: { type: String, validate: many }});

// or utilizing SchemaType methods directly:

var schema = new Schema({ name: 'string' });
schema.path('name').validate(validator, 'validation failed');
</code></pre>

<h4>Asynchronous validation:</h4>

<p>Passing a validator function that receives two arguments tells mongoose that the validator is an asynchronous validator. The first arg passed is the value to validate, the second is an callback function that must be passed either <code>true</code> or <code>false</code> when validation is complete. Asynchronous validators open the door for retreiving other documents from the database first to validate against.</p>

<pre><code>schema.path('name').validate(function (value, respond) {
  doStuff(value, function () {
    ...
    respond(false); // validation failed
  })
 }, 'my error type');
</code></pre>

<p>Validation occurs <code>pre('save')</code> or whenever you manually execute <a href="#document_Document-validate">document#validate</a>.</p>

<p>If validation fails during <code>pre('save')</code> and no callback was passed to receive the error, an <code>error</code> event will be emitted on your Models associated db <a href="#connection_Connection">connection</a>, passing the validation error object along.</p>

<pre><code>var conn = mongoose.createConnection(..);
conn.on('error', handleError);

var Product = conn.model('Product', yourSchema);
var dvd = new Product(..);
dvd.save(); // emits error on the `conn` above
</code></pre>

<p>If you desire handling these errors at the Model level, attach an <code>error</code> listener to your Model and the event will instead be emitted there.</p>

<pre><code>// registering an error listener on the Model lets us handle errors more locally
Product.on('error', handleError);
</code></pre></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">SchemaType.prototype.validate = function (obj, error) {
  if ('function' == typeof obj || obj &amp;&amp; 'RegExp' === obj.constructor.name) {
    this.validators.push([obj, error]);
    return this;
  }

  var i = arguments.length
    , arg

  while (i--) {
    arg = arguments[i];
    if (!(arg &amp;&amp; 'Object' == arg.constructor.name)) {
      var msg = 'Invalid validator. Received (' + typeof arg + ') '
        + arg
        + '. See http://mongoosejs.com/docs/api.html#schematype_SchemaType-validate';

      throw new Error(msg);
    }
    this.validate(arg.validator, arg.msg);
  }

  return this;
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="required">required</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>SchemaType.prototype.required()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Boolean}</span><span class="name">required</span><span class="description">enable/disable the validator</span></li><li class="tag"><span class="type">@return: </span><span class="types">{SchemaType}</span><span class="description">this</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Adds a required validator to this schematype.</p>

<h4>Example:</h4>

<pre><code>var s = new Schema({ born: { type: Date, required: true })
// or
Schema.path('name').required(true);
</code></pre></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">SchemaType.prototype.required = function (required) {
  var self = this;

  function __checkRequired (v) {
    // in here, `this` refers to the validating document.
    // no validation when this path wasn't selected in the query.
    // if ('isSelected' in this &amp;&amp;
    //     !this.isSelected(self.path) &amp;&amp;
    //     !this.isModified(self.path)) return true;
    return self.checkRequired(v);
  }

  if (false === required) {
    this.isRequired = false;
    this.validators = this.validators.filter(function (v) {
      return v[0].name !== '__checkRequired';
    });
  } else {
    this.isRequired = true;
    this.validators.push([__checkRequired, 'required']);
  }

  return this;
};</code></pre></div></div></div></article></div></div><!-- Foundation JS--><script type="text/javascript">document.write('<script src=' +
('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min' : 'http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min') +
'.js><\/script>')
</script><script src="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/foundation.min.js"></script><script src="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/foundation/foundation.reveal.min.js"></script><!-- Prism js--><script type="text/javascript">
/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 * MIT license http://www.opensource.org/licenses/mit-license.php/
 * @author Lea Verou http://lea.verou.me
 */(function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e],o={};for(var u in s)if(s.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);o[u]=s[u]}return i[e]=o},DFS:function(e,n){for(var r in e){n.call(e,r,e[r]);t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data),o);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar,l.language);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r,i){return n.stringify(t.tokenize(e,r),i)},tokenize:function(e,n,r){var i=t.Token,s=[e],o=n.rest;if(o){for(var u in o)n[u]=o[u];delete n.rest}e:for(var u in n){if(!n.hasOwnProperty(u)||!n[u])continue;var a=n[u],f=a.inside,l=!!a.lookbehind,c=0;a=a.pattern||a;for(var h=0;h<s.length;h++){var p=s[h];if(s.length>e.length)break e;if(p instanceof i)continue;a.lastIndex=0;var d=a.exec(p);if(d){l&&(c=d[1].length);var v=d.index-1+c,d=d[0].slice(c),m=d.length,g=v+m,y=p.slice(0,v+1),b=p.slice(g+1),w=[h,1];y&&w.push(y);var E=new i(u,f?t.tokenize(d,f):d);w.push(E);b&&w.push(b);Array.prototype.splice.apply(s,w)}}}return s},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t){this.type=e;this.content=t};n.stringify=function(e,r,i){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]")return e.map(function(t){return n.stringify(t,r,e)}).join("");var s={type:e.type,content:n.stringify(e.content,r,i),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:i};s.type=="comment"&&(s.attributes.spellcheck="true");t.hooks.run("wrap",s);var o="";for(var u in s.attributes)o+=u+'="'+(s.attributes[u]||"")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'" '+o+">"+s.content+"</"+s.tag+">"};if(!self.document){self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.tokenize(i,t.languages[r])));self.close()},!1);return}var r=document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}})();;
Prism.languages.markup={comment:/&lt;!--[\w\W]*?-->/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});;
Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});;
Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/ig,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/ig,inside:{punctuation:/\(/}}, number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};;
Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g});Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});;
Prism.languages.coffeescript=Prism.languages.extend("javascript",{"block-comment":/([#]{3}\s*\r?\n(.*\s*\r*\n*)\s*?\r?\n[#]{3})/g,comment:/(\s|^)([#]{1}[^#^\r^\n]{2,}?(\r?\n|$))/g,keyword:/\b(this|window|delete|class|extends|namespace|extend|ar|let|if|else|while|do|for|each|of|return|in|instanceof|new|with|typeof|try|catch|finally|null|undefined|break|continue)\b/g});Prism.languages.insertBefore("coffeescript","keyword",{"function":{pattern:/[a-z|A-z]+\s*[:|=]\s*(\([.|a-z\s|,|:|{|}|\"|\'|=]*\))?\s*-&gt;/gi,inside:{"function-name":/[_?a-z-|A-Z-]+(\s*[:|=])| @[_?$?a-z-|A-Z-]+(\s*)| /g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g}},"attr-name":/[_?a-z-|A-Z-]+(\s*:)| @[_?$?a-z-|A-Z-]+(\s*)| /g});;
Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},atrule:/@[\w-]+(?=\s+(\(|\{|;))/gi,url:/([-a-z]+-)*url(?=\()/gi,selector:/([^@;\{\}\(\)]?([^@;\{\}\(\)]|&amp;|\#\{\$[-_\w]+\})+)(?=\s*\{(\}|\s|[^\}]+(:|\{)[^\}]+))/gm});Prism.languages.insertBefore("scss","atrule",{keyword:/@(if|else if|else|for|each|while|import|extend|debug|warn|mixin|include|function|return)|(?=@for\s+\$[-_\w]+\s)+from/i});Prism.languages.insertBefore("scss","property",{variable:/((\$[-_\w]+)|(#\{\$[-_\w]+\}))/i});Prism.languages.insertBefore("scss","ignore",{placeholder:/%[-_\w]+/i,statement:/\B!(default|optional)\b/gi,"boolean":/\b(true|false)\b/g,"null":/\b(null)\b/g,operator:/\s+([-+]{1,2}|={1,2}|!=|\|?\||\?|\*|\/|\%)\s+/g});
;
</script><script type="text/javascript">
  var headerHeight = 64;

  $(document).foundation();

  $(function(){
    $('pre').addClass('language-javascript');
  //   $('#nav > ul > li > a[href$="'+location.pathname.substring(location.pathname.lastIndexOf('/')+1, location.pathname.length)+'"]').parent().addClass('active');
  })</script></body></html>